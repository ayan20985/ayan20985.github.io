<script async src="{{ '/assets/javascripts/main.js' | relative_url }}"></script>

{% if site.search %}
  {%- assign search_provider = site.search_provider | default: "lunr" -%}
  {%- case search_provider -%}
    {%- when "lunr" -%}
      {% include search/lunr-search-scripts.html %}
    {%- when "algolia" -%}
      {% include search/algolia-search-scripts.html %}
  {%- endcase -%}
{% endif %}

<!-- Countdown and redirect script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize countdown
    var countdownElement = document.getElementById('countdown');
    var redirectBanner = document.getElementById('redirect-banner');
    var closeButton = document.getElementById('close-redirect');
    var mainContent = document.getElementById('main-content');
    var seconds = 15;
    var countdownInterval;

    // Start countdown
    function startCountdown() {
      countdownInterval = setInterval(function() {
        seconds--;
        if (countdownElement) {
          countdownElement.textContent = seconds;
        }
        
        // When countdown reaches 0, redirect
        if (seconds <= 0) {
          clearInterval(countdownInterval);
          window.location.href = 'https://new.ayanali.net';
        }
      }, 1000);
    }

    // Start the countdown initially
    startCountdown();

    // Add event listener to close button
    if (closeButton && redirectBanner && mainContent) {
      closeButton.addEventListener('click', function() {
        // Clear the countdown interval to cancel the redirect
        clearInterval(countdownInterval);
        
        // Hide the redirect banner
        redirectBanner.style.display = 'none';
        
        // Adjust the main content position
        mainContent.style.marginTop = '0';
      });
    }
  });
</script>
